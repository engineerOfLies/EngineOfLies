<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>EngineOfLies: eol_input.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>eol_input.c</h1><a href="eol__input_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#include &quot;<a class="code" href="eol__input_8h.html">eol_input.h</a>&quot;</span>
<a name="l00002"></a>00002 <span class="preprocessor">#include &quot;<a class="code" href="eol__logger_8h.html">eol_logger.h</a>&quot;</span>
<a name="l00003"></a>00003 <span class="preprocessor">#ifdef __APPLE__</span>
<a name="l00004"></a>00004 <span class="preprocessor"></span><span class="preprocessor">#include &quot;fmemopen.h&quot;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#endif</span>
<a name="l00006"></a>00006 <span class="preprocessor"></span><span class="preprocessor">#include &lt;SDL.h&gt;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &lt;physfs.h&gt;</span>
<a name="l00008"></a>00008 
<a name="l00009"></a><a class="code" href="eol__input_8c.html#a77517decc8b15e5674f8f07c6a9c1a67">00009</a> <a class="code" href="structeolInput.html" title="structure for defining a control type.">eolInput</a> * <a class="code" href="eol__input_8c.html#a77517decc8b15e5674f8f07c6a9c1a67">_input_list</a> = NULL;
<a name="l00010"></a><a class="code" href="eol__input_8c.html#a2a6c0b737135d502e8d23cf17839edb4">00010</a> <a class="code" href="eol__types_8h.html#ad9718fff0d6b6166a58b74814a5ef687">eolUint</a>    <a class="code" href="eol__input_8c.html#a2a6c0b737135d502e8d23cf17839edb4">_num_inputs</a> = 0;
<a name="l00011"></a><a class="code" href="eol__input_8c.html#a848d720136d359525ed86acf7cc5a4d2">00011</a> <a class="code" href="eol__types_8h.html#ae3728b39ff0032c8a9ec060dc81dc115">eolBool</a>    <a class="code" href="eol__input_8c.html#a848d720136d359525ed86acf7cc5a4d2">_eol_input_initialized</a> = <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a3022b161029854a17d9534a80cff370f">eolFalse</a>;
<a name="l00012"></a><a class="code" href="eol__input_8c.html#a9f6799c830daa0efe31404a7dc56471a">00012</a> <a class="code" href="eol__types_8h.html#ad9718fff0d6b6166a58b74814a5ef687">eolUint</a>    <a class="code" href="eol__input_8c.html#a9f6799c830daa0efe31404a7dc56471a">_held_threshold</a> = 0;
<a name="l00013"></a><a class="code" href="eol__input_8c.html#ad474f3aecaeb2ce7d5ef519360e7fcc8">00013</a> <a class="code" href="eol__types_8h.html#ad9718fff0d6b6166a58b74814a5ef687">eolUint</a>    <a class="code" href="eol__input_8c.html#ad474f3aecaeb2ce7d5ef519360e7fcc8">_double_tap_threshold</a> = 0;
<a name="l00014"></a><a class="code" href="eol__input_8c.html#a90d509e2e16c3bcf242e0b37b8422b17">00014</a> <a class="code" href="eol__types_8h.html#ad9718fff0d6b6166a58b74814a5ef687">eolUint</a>    <a class="code" href="eol__input_8c.html#a90d509e2e16c3bcf242e0b37b8422b17">_this_frame_keyboard_mod</a> = 0;
<a name="l00015"></a><a class="code" href="eol__input_8c.html#a59b65f9fb163d553edca6888047397bd">00015</a> <a class="code" href="eol__types_8h.html#ad9718fff0d6b6166a58b74814a5ef687">eolUint</a>    <a class="code" href="eol__input_8c.html#a59b65f9fb163d553edca6888047397bd">_last_frame_keyboard_mod</a> = 0;
<a name="l00016"></a><a class="code" href="eol__input_8c.html#a7788462d60ffe628d5ad4991635e8cbb">00016</a> Uint8    * <a class="code" href="eol__input_8c.html#a7788462d60ffe628d5ad4991635e8cbb">_this_frame_keyboard</a> = NULL;
<a name="l00017"></a><a class="code" href="eol__input_8c.html#a436c5e279e62f221c15f2d13257b0baf">00017</a> Uint8    * <a class="code" href="eol__input_8c.html#a436c5e279e62f221c15f2d13257b0baf">_last_frame_keyboard</a> = NULL;
<a name="l00018"></a><a class="code" href="eol__input_8c.html#a312af162e431bdd997840a060aa76f1d">00018</a> <a class="code" href="eol__types_8h.html#a7f34f0e945b4ead0fa8f912ea37edcfb">eolInt</a>     <a class="code" href="eol__input_8c.html#a312af162e431bdd997840a060aa76f1d">_eol_input_keyboard_numkeys</a> = 0;
<a name="l00019"></a>00019 <span class="comment">/* local funtions */</span>
<a name="l00020"></a>00020 <span class="keywordtype">void</span> <a class="code" href="eol__input_8c.html#a1c568f86e501b10a1382967a6d891981">eol_input_keyboard_init</a>();
<a name="l00021"></a>00021 <span class="keywordtype">void</span> <a class="code" href="eol__input_8c.html#ae6b0f9283b309e591337bdd99f720d17">eol_input_keyboard_close</a>();
<a name="l00022"></a>00022 <span class="keywordtype">void</span> <a class="code" href="eol__input_8c.html#afab3e67949165772311f11e9f066a802">updateKeyboard</a>();
<a name="l00023"></a>00023 <span class="keywordtype">void</span> <a class="code" href="eol__input_8c.html#a668c18a186b6fb3ec91d6053d7a97496">eol_input_close</a>();
<a name="l00024"></a>00024 
<a name="l00025"></a><a class="code" href="eol__input_8h.html#a9cd3d21c2438657874233f0eff06d3d2">00025</a> <span class="keywordtype">void</span> <a class="code" href="eol__input_8c.html#a9cd3d21c2438657874233f0eff06d3d2" title="initializes internal components of eol_input">eol_input_init</a>()
<a name="l00026"></a>00026 {
<a name="l00027"></a>00027   <a class="code" href="eol__logger_8c.html#aeb86980a9e11fb8938d3e4dac6e62834" title="log a message at the specified warning levels. It will ignore warning levels below...">eol_logger_message</a>(<a class="code" href="eol__logger_8h.html#a00ea7ac1e164cb45b223d03ef228c968afe5720116616f4eed506952cb750eed2">EOL_LOG_INFO</a>,<span class="stringliteral">&quot;eol_input: initializing\n&quot;</span>);
<a name="l00028"></a>00028   SDL_EnableKeyRepeat(SDL_DEFAULT_REPEAT_DELAY,SDL_DEFAULT_REPEAT_INTERVAL);
<a name="l00029"></a>00029   <a class="code" href="eol__input_8c.html#aa0e135a156c7288289859f989be653c2" title="load the input system configuration and input mappings from files. If no files found...">eol_input_load_config</a>();
<a name="l00030"></a>00030   <a class="code" href="eol__input_8c.html#a1c568f86e501b10a1382967a6d891981">eol_input_keyboard_init</a>();
<a name="l00031"></a>00031   atexit(<a class="code" href="eol__input_8c.html#a668c18a186b6fb3ec91d6053d7a97496">eol_input_close</a>);
<a name="l00032"></a>00032   <a class="code" href="eol__input_8c.html#a848d720136d359525ed86acf7cc5a4d2">_eol_input_initialized</a> = <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a1ccbeff6bcfdd81dad879593a1c859a7">eolTrue</a>;
<a name="l00033"></a>00033   <a class="code" href="eol__logger_8c.html#aeb86980a9e11fb8938d3e4dac6e62834" title="log a message at the specified warning levels. It will ignore warning levels below...">eol_logger_message</a>(<a class="code" href="eol__logger_8h.html#a00ea7ac1e164cb45b223d03ef228c968afe5720116616f4eed506952cb750eed2">EOL_LOG_INFO</a>,<span class="stringliteral">&quot;eol_input: initialized\n&quot;</span>);
<a name="l00034"></a>00034 }
<a name="l00035"></a>00035 
<a name="l00036"></a><a class="code" href="eol__input_8c.html#a668c18a186b6fb3ec91d6053d7a97496">00036</a> <span class="keywordtype">void</span> <a class="code" href="eol__input_8c.html#a668c18a186b6fb3ec91d6053d7a97496">eol_input_close</a>()
<a name="l00037"></a>00037 {
<a name="l00038"></a>00038   <a class="code" href="eol__logger_8c.html#aeb86980a9e11fb8938d3e4dac6e62834" title="log a message at the specified warning levels. It will ignore warning levels below...">eol_logger_message</a>(<a class="code" href="eol__logger_8h.html#a00ea7ac1e164cb45b223d03ef228c968afe5720116616f4eed506952cb750eed2">EOL_LOG_INFO</a>,<span class="stringliteral">&quot;eol_input: closing\n&quot;</span>);
<a name="l00039"></a>00039   <a class="code" href="eol__input_8c.html#ae6b0f9283b309e591337bdd99f720d17">eol_input_keyboard_close</a>();
<a name="l00040"></a>00040   <span class="keywordflow">if</span> (_input_list != NULL)
<a name="l00041"></a>00041   {
<a name="l00042"></a>00042     free(_input_list);
<a name="l00043"></a>00043     _input_list = NULL;
<a name="l00044"></a>00044   }
<a name="l00045"></a>00045   <a class="code" href="eol__input_8c.html#a848d720136d359525ed86acf7cc5a4d2">_eol_input_initialized</a> = <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a3022b161029854a17d9534a80cff370f">eolFalse</a>;
<a name="l00046"></a>00046   <a class="code" href="eol__logger_8c.html#aeb86980a9e11fb8938d3e4dac6e62834" title="log a message at the specified warning levels. It will ignore warning levels below...">eol_logger_message</a>(<a class="code" href="eol__logger_8h.html#a00ea7ac1e164cb45b223d03ef228c968afe5720116616f4eed506952cb750eed2">EOL_LOG_INFO</a>,<span class="stringliteral">&quot;eol_input: closed\n&quot;</span>);
<a name="l00047"></a>00047 }
<a name="l00048"></a>00048 
<a name="l00049"></a><a class="code" href="eol__input_8h.html#a415dd920131c1df49424c894e7ff3f88">00049</a> <a class="code" href="eol__types_8h.html#ae3728b39ff0032c8a9ec060dc81dc115">eolBool</a> <a class="code" href="eol__input_8c.html#a415dd920131c1df49424c894e7ff3f88" title="returns the initialization status of eol_input">eol_input_is_initialized</a>()
<a name="l00050"></a>00050 {
<a name="l00051"></a>00051   <span class="keywordflow">return</span> <a class="code" href="eol__input_8c.html#a848d720136d359525ed86acf7cc5a4d2">_eol_input_initialized</a>;
<a name="l00052"></a>00052 }
<a name="l00053"></a>00053 
<a name="l00054"></a><a class="code" href="eol__input_8h.html#a09300830bfef6ddf57a5e628051897c9">00054</a> <span class="keywordtype">void</span> <a class="code" href="eol__input_8c.html#a09300830bfef6ddf57a5e628051897c9" title="updated internal input states. This need to be called every frame or as often as...">eol_input_update</a>()
<a name="l00055"></a>00055 {
<a name="l00056"></a>00056   <span class="keywordtype">int</span> i;
<a name="l00057"></a>00057   SDLMod mod;
<a name="l00058"></a>00058   SDL_Event event;
<a name="l00059"></a>00059   <span class="keywordflow">while</span>(SDL_PeepEvents(&amp;event, 1, SDL_GETEVENT, SDL_ALLEVENTS));
<a name="l00060"></a>00060   <a class="code" href="eol__input_8c.html#afab3e67949165772311f11e9f066a802">updateKeyboard</a>();
<a name="l00061"></a>00061   SDL_PumpEvents();
<a name="l00062"></a>00062   mod = SDL_GetModState();
<a name="l00063"></a>00063   <span class="keywordflow">for</span>(i = 0;i &lt; <a class="code" href="eol__input_8c.html#a2a6c0b737135d502e8d23cf17839edb4">_num_inputs</a>;i++)
<a name="l00064"></a>00064   {
<a name="l00065"></a>00065     _input_list[i].<a class="code" href="structeolInput.html#a7cc1f189763dcb4a6730e4c40766db54">oldvalue</a> = _input_list[i].<a class="code" href="structeolInput.html#ab33f299bd08d8f7b8f06e3495a0f54b9">value</a>;
<a name="l00066"></a>00066     <span class="keywordflow">if</span>(strcmp(_input_list[i].<a class="code" href="eol__opengl_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a>,<span class="stringliteral">&quot;key&quot;</span>) == 0)
<a name="l00067"></a>00067     {
<a name="l00068"></a>00068       _input_list[i].<a class="code" href="structeolInput.html#ab33f299bd08d8f7b8f06e3495a0f54b9">value</a> = <a class="code" href="eol__input_8c.html#a7788462d60ffe628d5ad4991635e8cbb">_this_frame_keyboard</a>[_input_list[i].<a class="code" href="structeolInput.html#a78c467526e5fe5392ef871d113d3169b">id</a>];
<a name="l00069"></a>00069     }
<a name="l00070"></a>00070     <span class="keywordflow">else</span> <span class="keywordflow">if</span>(strcmp(_input_list[i].type,<span class="stringliteral">&quot;mod&quot;</span>) == 0)
<a name="l00071"></a>00071     {
<a name="l00072"></a>00072       <span class="keywordflow">if</span>(mod &amp; _input_list[i].<span class="keywordtype">id</span>)
<a name="l00073"></a>00073       {
<a name="l00074"></a>00074         _input_list[i].<a class="code" href="structeolInput.html#ab33f299bd08d8f7b8f06e3495a0f54b9">value</a> = 1;
<a name="l00075"></a>00075       }
<a name="l00076"></a>00076       <span class="keywordflow">else</span> _input_list[i].<a class="code" href="structeolInput.html#ab33f299bd08d8f7b8f06e3495a0f54b9">value</a> = 0;
<a name="l00077"></a>00077     }
<a name="l00078"></a>00078     <span class="comment">/*TODO:mouse section*/</span>
<a name="l00079"></a>00079     <span class="comment">/*TODO:joystick section*/</span>
<a name="l00080"></a>00080     <span class="keywordflow">if</span>(_input_list[i].<a class="code" href="eol__opengl_8h.html#af6014f4fe61629a8a7e928c34e9ee5cd">value</a> == 1)
<a name="l00081"></a>00081     {
<a name="l00082"></a>00082       _input_list[i].<a class="code" href="structeolInput.html#afe768e732cc5d1d099677263d2f8b2c6">lastPress</a> = _input_list[i].<a class="code" href="structeolInput.html#af951db9d31c486e8c691e8e3b39e3ad8">timePress</a>;
<a name="l00083"></a>00083       _input_list[i].<a class="code" href="structeolInput.html#af951db9d31c486e8c691e8e3b39e3ad8">timePress</a> = SDL_GetTicks();
<a name="l00084"></a>00084     }
<a name="l00085"></a>00085   }
<a name="l00086"></a>00086 }
<a name="l00087"></a>00087 
<a name="l00088"></a><a class="code" href="eol__input_8h.html#a88b420bd1b5a3c0afec16f8f9649e353">00088</a> <a class="code" href="eol__types_8h.html#a7f34f0e945b4ead0fa8f912ea37edcfb">eolInt</a> <a class="code" href="eol__input_8c.html#a88b420bd1b5a3c0afec16f8f9649e353" title="converts input config into sdl_key info">eol_input_parse</a>(<span class="keywordtype">char</span> *<a class="code" href="eol__opengl_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a>, <span class="keywordtype">char</span> *input)
<a name="l00089"></a>00089 {
<a name="l00090"></a>00090   <span class="keywordtype">int</span> i;
<a name="l00091"></a>00091   <span class="keywordflow">if</span>((type == NULL)||(input == NULL))<span class="keywordflow">return</span> -1;
<a name="l00092"></a>00092   <span class="keywordflow">if</span>(strcmp(type,<span class="stringliteral">&quot;key&quot;</span>)==0)
<a name="l00093"></a>00093   {
<a name="l00094"></a>00094     <span class="keywordflow">if</span>(input[0] == <span class="charliteral">&#39;F&#39;</span>)
<a name="l00095"></a>00095     {
<a name="l00096"></a>00096       sscanf(input,<span class="stringliteral">&quot;F%i&quot;</span>,&amp;i);
<a name="l00097"></a>00097       i--;
<a name="l00098"></a>00098       <span class="keywordflow">return</span> SDLK_F1 + i;
<a name="l00099"></a>00099     }
<a name="l00100"></a>00100     <span class="keywordflow">if</span>((input[0] &gt;= <span class="charliteral">&#39;a&#39;</span>)&amp;&amp;(input[0] &lt;= <span class="charliteral">&#39;z&#39;</span>))
<a name="l00101"></a>00101     {
<a name="l00102"></a>00102       <span class="keywordflow">return</span> input[0]-<span class="charliteral">&#39;a&#39;</span> + SDLK_a;
<a name="l00103"></a>00103     }
<a name="l00104"></a>00104     <span class="keywordflow">if</span>((input[0] &gt;= <span class="charliteral">&#39;0&#39;</span>)&amp;&amp;(input[0] &lt;= <span class="charliteral">&#39;9&#39;</span>))
<a name="l00105"></a>00105     {
<a name="l00106"></a>00106       <span class="keywordflow">return</span> input[0]-<span class="charliteral">&#39;0&#39;</span> + SDLK_0;
<a name="l00107"></a>00107     }
<a name="l00108"></a>00108     <span class="keywordflow">if</span>(input[0] == <span class="charliteral">&#39;/&#39;</span>)<span class="keywordflow">return</span> SDLK_SLASH;
<a name="l00109"></a>00109     <span class="keywordflow">if</span>(input[0] == <span class="charliteral">&#39;\\&#39;</span>)<span class="keywordflow">return</span> SDLK_BACKSLASH;
<a name="l00110"></a>00110     <span class="keywordflow">if</span>(input[0] == <span class="charliteral">&#39;[&#39;</span>)<span class="keywordflow">return</span> SDLK_LEFTBRACKET;
<a name="l00111"></a>00111     <span class="keywordflow">if</span>(input[0] == <span class="charliteral">&#39;]&#39;</span>)<span class="keywordflow">return</span> SDLK_RIGHTBRACKET;
<a name="l00112"></a>00112     <span class="keywordflow">if</span>(input[0] == <span class="charliteral">&#39;-&#39;</span>)<span class="keywordflow">return</span> SDLK_MINUS;
<a name="l00113"></a>00113     <span class="keywordflow">if</span>(input[0] == <span class="charliteral">&#39;=&#39;</span>)<span class="keywordflow">return</span> SDLK_EQUALS;
<a name="l00114"></a>00114     <span class="keywordflow">if</span>(input[0] == <span class="charliteral">&#39;`&#39;</span>)<span class="keywordflow">return</span> SDLK_CARET;
<a name="l00115"></a>00115     <span class="keywordflow">if</span>(input[0] == <span class="charliteral">&#39;,&#39;</span>)<span class="keywordflow">return</span> SDLK_COMMA;
<a name="l00116"></a>00116     <span class="keywordflow">if</span>(input[0] == <span class="charliteral">&#39;.&#39;</span>)<span class="keywordflow">return</span> SDLK_PERIOD;
<a name="l00117"></a>00117     <span class="keywordflow">if</span>(strcmp(input,<span class="stringliteral">&quot;TAB&quot;</span>)==0)<span class="keywordflow">return</span> SDLK_TAB;
<a name="l00118"></a>00118     <span class="keywordflow">if</span>(strcmp(input,<span class="stringliteral">&quot;ESC&quot;</span>)==0)<span class="keywordflow">return</span> SDLK_ESCAPE;
<a name="l00119"></a>00119     <span class="keywordflow">if</span>(strcmp(input,<span class="stringliteral">&quot;ENTER&quot;</span>)==0)<span class="keywordflow">return</span> SDLK_RETURN;
<a name="l00120"></a>00120     <span class="keywordflow">if</span>(strcmp(input,<span class="stringliteral">&quot;SPACE&quot;</span>)==0)<span class="keywordflow">return</span> SDLK_SPACE;
<a name="l00121"></a>00121     <span class="keywordflow">if</span>(strcmp(input,<span class="stringliteral">&quot;UPARROW&quot;</span>)==0)<span class="keywordflow">return</span> SDLK_UP;
<a name="l00122"></a>00122     <span class="keywordflow">if</span>(strcmp(input,<span class="stringliteral">&quot;DOWNARROW&quot;</span>)==0)<span class="keywordflow">return</span> SDLK_DOWN;
<a name="l00123"></a>00123     <span class="keywordflow">if</span>(strcmp(input,<span class="stringliteral">&quot;LEFTARROW&quot;</span>)==0)<span class="keywordflow">return</span> SDLK_LEFT;
<a name="l00124"></a>00124     <span class="keywordflow">if</span>(strcmp(input,<span class="stringliteral">&quot;RIGHTARROW&quot;</span>)==0)<span class="keywordflow">return</span> SDLK_RIGHT;
<a name="l00125"></a>00125     <span class="keywordflow">if</span>(strcmp(input,<span class="stringliteral">&quot;BACKSPACE&quot;</span>)==0)<span class="keywordflow">return</span> SDLK_BACKSPACE;
<a name="l00126"></a>00126   }
<a name="l00127"></a>00127   <span class="keywordflow">if</span>(strcmp(type,<span class="stringliteral">&quot;mod&quot;</span>)==0)
<a name="l00128"></a>00128   {
<a name="l00129"></a>00129     <span class="keywordflow">if</span>(strcmp(input,<span class="stringliteral">&quot;LShift&quot;</span>)==0)
<a name="l00130"></a>00130     {
<a name="l00131"></a>00131       <span class="keywordflow">return</span> KMOD_LSHIFT;
<a name="l00132"></a>00132     }
<a name="l00133"></a>00133     <span class="keywordflow">if</span>(strcmp(input,<span class="stringliteral">&quot;RShift&quot;</span>)==0)
<a name="l00134"></a>00134     {
<a name="l00135"></a>00135       <span class="keywordflow">return</span> KMOD_RSHIFT;
<a name="l00136"></a>00136     }
<a name="l00137"></a>00137     <span class="keywordflow">if</span>(strcmp(input,<span class="stringliteral">&quot;LCtrl&quot;</span>)==0)
<a name="l00138"></a>00138     {
<a name="l00139"></a>00139       <span class="keywordflow">return</span> KMOD_LCTRL;
<a name="l00140"></a>00140     }
<a name="l00141"></a>00141     <span class="keywordflow">if</span>(strcmp(input,<span class="stringliteral">&quot;RCtrl&quot;</span>)==0)
<a name="l00142"></a>00142     {
<a name="l00143"></a>00143       <span class="keywordflow">return</span> KMOD_RCTRL;
<a name="l00144"></a>00144     }
<a name="l00145"></a>00145     <span class="keywordflow">if</span>(strcmp(input,<span class="stringliteral">&quot;LAlt&quot;</span>)==0)
<a name="l00146"></a>00146     {
<a name="l00147"></a>00147       <span class="keywordflow">return</span> KMOD_LALT;
<a name="l00148"></a>00148     }
<a name="l00149"></a>00149     <span class="keywordflow">if</span>(strcmp(input,<span class="stringliteral">&quot;RAlt&quot;</span>)==0)
<a name="l00150"></a>00150     {
<a name="l00151"></a>00151       <span class="keywordflow">return</span> KMOD_RALT;
<a name="l00152"></a>00152     }
<a name="l00153"></a>00153   }
<a name="l00154"></a>00154   <span class="keywordflow">if</span>(strcmp(type,<span class="stringliteral">&quot;button&quot;</span>)==0)
<a name="l00155"></a>00155   {
<a name="l00156"></a>00156     sscanf(input,<span class="stringliteral">&quot;%i&quot;</span>,&amp;i);
<a name="l00157"></a>00157     <span class="keywordflow">return</span> i;
<a name="l00158"></a>00158   }
<a name="l00159"></a>00159   <span class="keywordflow">if</span>(strcmp(type,<span class="stringliteral">&quot;+axis&quot;</span>)==0)
<a name="l00160"></a>00160   {
<a name="l00161"></a>00161     sscanf(input,<span class="stringliteral">&quot;%i&quot;</span>,&amp;i);
<a name="l00162"></a>00162     <span class="keywordflow">return</span> i;
<a name="l00163"></a>00163   }
<a name="l00164"></a>00164   <span class="keywordflow">if</span>(strcmp(type,<span class="stringliteral">&quot;-axis&quot;</span>)==0)
<a name="l00165"></a>00165   {
<a name="l00166"></a>00166     sscanf(input,<span class="stringliteral">&quot;%i&quot;</span>,&amp;i);
<a name="l00167"></a>00167     <span class="keywordflow">return</span> i;
<a name="l00168"></a>00168   }
<a name="l00169"></a>00169   <span class="keywordflow">return</span> -1;
<a name="l00170"></a>00170 }
<a name="l00171"></a>00171 
<a name="l00172"></a><a class="code" href="eol__input_8h.html#aa0e135a156c7288289859f989be653c2">00172</a> <span class="keywordtype">void</span> <a class="code" href="eol__input_8c.html#aa0e135a156c7288289859f989be653c2" title="load the input system configuration and input mappings from files. If no files found...">eol_input_load_config</a>()
<a name="l00173"></a>00173 {
<a name="l00174"></a>00174   <a class="code" href="eol__types_8h.html#a49d637f56d79994c8981f2314bf76400">eolSI64</a> <a class="code" href="eol__opengl_8h.html#a3d1e3edfcf61ca2d831883e1afbad89e">size</a>;
<a name="l00175"></a>00175   <span class="keywordtype">char</span> *<a class="code" href="eol__opengl_8h.html#a3667f558219c90437106b544a3ca00b8">buffer</a>;
<a name="l00176"></a>00176   <span class="keywordtype">char</span> buf[512];
<a name="l00177"></a>00177   <span class="keywordtype">char</span> input[16];
<a name="l00178"></a>00178   <a class="code" href="eol__types_8h.html#a7f34f0e945b4ead0fa8f912ea37edcfb">eolInt</a> s;
<a name="l00179"></a>00179   <a class="code" href="eol__types_8h.html#ad9718fff0d6b6166a58b74814a5ef687">eolUint</a> in = 0;
<a name="l00180"></a>00180   PHYSFS_File *PSfile;
<a name="l00181"></a>00181   FILE *file;
<a name="l00182"></a>00182   PSfile = PHYSFS_openRead(<span class="stringliteral">&quot;system/controls.cfg&quot;</span>);
<a name="l00183"></a>00183   <span class="keywordflow">if</span>(PSfile == NULL)
<a name="l00184"></a>00184   {
<a name="l00185"></a>00185     <a class="code" href="eol__logger_8c.html#aeb86980a9e11fb8938d3e4dac6e62834" title="log a message at the specified warning levels. It will ignore warning levels below...">eol_logger_message</a>(<a class="code" href="eol__logger_8h.html#a00ea7ac1e164cb45b223d03ef228c968ad7f0aacd56edcfd303cdefb903329486">EOL_LOG_ERROR</a>,<span class="stringliteral">&quot;Unable to open control configuration file!\n&quot;</span>);
<a name="l00186"></a>00186     <span class="keywordflow">return</span>;
<a name="l00187"></a>00187   }
<a name="l00188"></a>00188   size = PHYSFS_fileLength(PSfile);
<a name="l00189"></a>00189   buffer = (<span class="keywordtype">char</span> *)malloc(size);
<a name="l00190"></a>00190   <span class="keywordflow">if</span>(buffer == NULL)
<a name="l00191"></a>00191   {
<a name="l00192"></a>00192     <a class="code" href="eol__logger_8c.html#aeb86980a9e11fb8938d3e4dac6e62834" title="log a message at the specified warning levels. It will ignore warning levels below...">eol_logger_message</a>(<a class="code" href="eol__logger_8h.html#a00ea7ac1e164cb45b223d03ef228c968ad7f0aacd56edcfd303cdefb903329486">EOL_LOG_ERROR</a>,<span class="stringliteral">&quot;Unable to allocate space for control configuration file\n&quot;</span>);
<a name="l00193"></a>00193     PHYSFS_close(PSfile);
<a name="l00194"></a>00194     <span class="keywordflow">return</span>;
<a name="l00195"></a>00195   }
<a name="l00196"></a>00196   PHYSFS_read(PSfile, buffer, size, 1);
<a name="l00197"></a>00197   file = fmemopen (buffer, size, <span class="stringliteral">&quot;r&quot;</span>);
<a name="l00198"></a>00198   <span class="comment">/*Dry run to count inputs:*/</span>
<a name="l00199"></a>00199   <span class="keywordflow">if</span> (_input_list != NULL)
<a name="l00200"></a>00200   {
<a name="l00201"></a>00201     free(_input_list);
<a name="l00202"></a>00202     _input_list = NULL;
<a name="l00203"></a>00203   }
<a name="l00204"></a>00204   <a class="code" href="eol__input_8c.html#a2a6c0b737135d502e8d23cf17839edb4">_num_inputs</a> = 0;
<a name="l00205"></a>00205   <span class="keywordflow">while</span>(fscanf(file, <span class="stringliteral">&quot;%s&quot;</span>, buf) != EOF)
<a name="l00206"></a>00206   {
<a name="l00207"></a>00207     <span class="keywordflow">if</span>(strcmp(buf,<span class="stringliteral">&quot;#&quot;</span>) ==0)
<a name="l00208"></a>00208     {
<a name="l00209"></a>00209       fgets(buf, <span class="keyword">sizeof</span>(buf), file);
<a name="l00210"></a>00210       <span class="keywordflow">continue</span>;<span class="comment">/*ignore the rest of the line.*/</span>
<a name="l00211"></a>00211     }
<a name="l00212"></a>00212     <span class="keywordflow">if</span>(strcmp(buf,<span class="stringliteral">&quot;&lt;input&gt;&quot;</span>) ==0)
<a name="l00213"></a>00213     {
<a name="l00214"></a>00214       <a class="code" href="eol__input_8c.html#a2a6c0b737135d502e8d23cf17839edb4">_num_inputs</a>++;
<a name="l00215"></a>00215       <span class="keywordflow">continue</span>;
<a name="l00216"></a>00216     } 
<a name="l00217"></a>00217   }
<a name="l00218"></a>00218 
<a name="l00219"></a>00219   _input_list = (<a class="code" href="structeolInput.html" title="structure for defining a control type.">eolInput</a> *)malloc(<span class="keyword">sizeof</span>(<a class="code" href="structeolInput.html" title="structure for defining a control type.">eolInput</a>)*<a class="code" href="eol__input_8c.html#a2a6c0b737135d502e8d23cf17839edb4">_num_inputs</a>);
<a name="l00220"></a>00220   in = 0;
<a name="l00221"></a>00221   <span class="keywordflow">while</span>(fscanf(file, <span class="stringliteral">&quot;%s&quot;</span>, buf) != EOF)
<a name="l00222"></a>00222   {
<a name="l00223"></a>00223     <span class="keywordflow">if</span>(strcmp(buf,<span class="stringliteral">&quot;#&quot;</span>) ==0)
<a name="l00224"></a>00224     {
<a name="l00225"></a>00225       fgets(buf, <span class="keyword">sizeof</span>(buf), file);
<a name="l00226"></a>00226       <span class="keywordflow">continue</span>;<span class="comment">/*ignore the rest of the line.*/</span>
<a name="l00227"></a>00227     }
<a name="l00228"></a>00228     <span class="keywordflow">if</span>(strcmp(buf,<span class="stringliteral">&quot;&lt;input&gt;&quot;</span>) ==0)
<a name="l00229"></a>00229     {
<a name="l00230"></a>00230       fscanf(file, <span class="stringliteral">&quot;%s %s %s&quot;</span>,_input_list[in].<a class="code" href="eol__opengl_8h.html#a5c4947d4516dd7cfa3505ce3a648a4ef">name</a>,_input_list[in].<a class="code" href="eol__opengl_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a>,input);
<a name="l00231"></a>00231       s = <a class="code" href="eol__input_8c.html#a88b420bd1b5a3c0afec16f8f9649e353" title="converts input config into sdl_key info">eol_input_parse</a>(_input_list[in].type,input);
<a name="l00232"></a>00232       <span class="keywordflow">if</span>(s != -1)
<a name="l00233"></a>00233       {
<a name="l00234"></a>00234         _input_list[in].<a class="code" href="structeolInput.html#a78c467526e5fe5392ef871d113d3169b">id</a> = s;
<a name="l00235"></a>00235         in++;
<a name="l00236"></a>00236       }
<a name="l00237"></a>00237       <span class="keywordflow">continue</span>;
<a name="l00238"></a>00238     }
<a name="l00239"></a>00239     
<a name="l00240"></a>00240   }
<a name="l00241"></a>00241   fclose(file);
<a name="l00242"></a>00242   PHYSFS_close(PSfile);
<a name="l00243"></a>00243   free(buffer);
<a name="l00244"></a>00244 }
<a name="l00245"></a>00245 
<a name="l00246"></a><a class="code" href="eol__input_8c.html#ae6b0f9283b309e591337bdd99f720d17">00246</a> <span class="keywordtype">void</span> <a class="code" href="eol__input_8c.html#ae6b0f9283b309e591337bdd99f720d17">eol_input_keyboard_close</a>()
<a name="l00247"></a>00247 {
<a name="l00248"></a>00248   <span class="keywordflow">if</span> (<a class="code" href="eol__input_8c.html#a436c5e279e62f221c15f2d13257b0baf">_last_frame_keyboard</a> != NULL)free(<a class="code" href="eol__input_8c.html#a436c5e279e62f221c15f2d13257b0baf">_last_frame_keyboard</a>);
<a name="l00249"></a>00249 }
<a name="l00250"></a>00250 
<a name="l00251"></a><a class="code" href="eol__input_8c.html#a1c568f86e501b10a1382967a6d891981">00251</a> <span class="keywordtype">void</span> <a class="code" href="eol__input_8c.html#a1c568f86e501b10a1382967a6d891981">eol_input_keyboard_init</a>()
<a name="l00252"></a>00252 {
<a name="l00253"></a>00253   <a class="code" href="eol__input_8c.html#a7788462d60ffe628d5ad4991635e8cbb">_this_frame_keyboard</a> = SDL_GetKeyState(&amp;<a class="code" href="eol__input_8c.html#a312af162e431bdd997840a060aa76f1d">_eol_input_keyboard_numkeys</a>);
<a name="l00254"></a>00254   <a class="code" href="eol__input_8c.html#a436c5e279e62f221c15f2d13257b0baf">_last_frame_keyboard</a> = (Uint8 *)malloc(<span class="keyword">sizeof</span>(Uint8)*<a class="code" href="eol__input_8c.html#a312af162e431bdd997840a060aa76f1d">_eol_input_keyboard_numkeys</a>);
<a name="l00255"></a>00255   memcpy(
<a name="l00256"></a>00256       <a class="code" href="eol__input_8c.html#a436c5e279e62f221c15f2d13257b0baf">_last_frame_keyboard</a>,
<a name="l00257"></a>00257       <a class="code" href="eol__input_8c.html#a7788462d60ffe628d5ad4991635e8cbb">_this_frame_keyboard</a>,
<a name="l00258"></a>00258       <span class="keyword">sizeof</span>(Uint8)*<a class="code" href="eol__input_8c.html#a312af162e431bdd997840a060aa76f1d">_eol_input_keyboard_numkeys</a>
<a name="l00259"></a>00259       );
<a name="l00260"></a>00260       <span class="keywordflow">if</span>(<a class="code" href="eol__input_8c.html#a436c5e279e62f221c15f2d13257b0baf">_last_frame_keyboard</a> == NULL)
<a name="l00261"></a>00261   {
<a name="l00262"></a>00262     <a class="code" href="eol__logger_8c.html#aeb86980a9e11fb8938d3e4dac6e62834" title="log a message at the specified warning levels. It will ignore warning levels below...">eol_logger_message</a>(<a class="code" href="eol__logger_8h.html#a00ea7ac1e164cb45b223d03ef228c968ad7f0aacd56edcfd303cdefb903329486">EOL_LOG_ERROR</a>,<span class="stringliteral">&quot;eol_input: unable to initialize keyboard structure!\n&quot;</span>);
<a name="l00263"></a>00263   }
<a name="l00264"></a>00264 }
<a name="l00265"></a>00265 
<a name="l00266"></a><a class="code" href="eol__input_8c.html#afab3e67949165772311f11e9f066a802">00266</a> <span class="keywordtype">void</span> <a class="code" href="eol__input_8c.html#afab3e67949165772311f11e9f066a802">updateKeyboard</a>()
<a name="l00267"></a>00267 {
<a name="l00268"></a>00268   <span class="keywordtype">int</span> i;
<a name="l00269"></a>00269   <span class="keywordflow">if</span>((!<a class="code" href="eol__input_8c.html#a848d720136d359525ed86acf7cc5a4d2">_eol_input_initialized</a>) ||
<a name="l00270"></a>00270      (<a class="code" href="eol__input_8c.html#a436c5e279e62f221c15f2d13257b0baf">_last_frame_keyboard</a> == NULL) ||
<a name="l00271"></a>00271      (<a class="code" href="eol__input_8c.html#a7788462d60ffe628d5ad4991635e8cbb">_this_frame_keyboard</a> == NULL))<span class="keywordflow">return</span>;
<a name="l00272"></a>00272   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="eol__input_8c.html#a312af162e431bdd997840a060aa76f1d">_eol_input_keyboard_numkeys</a>;i++)
<a name="l00273"></a>00273   {
<a name="l00274"></a>00274     <a class="code" href="eol__input_8c.html#a436c5e279e62f221c15f2d13257b0baf">_last_frame_keyboard</a>[i] = <a class="code" href="eol__input_8c.html#a7788462d60ffe628d5ad4991635e8cbb">_this_frame_keyboard</a>[i];
<a name="l00275"></a>00275   }
<a name="l00276"></a>00276   <a class="code" href="eol__input_8c.html#a59b65f9fb163d553edca6888047397bd">_last_frame_keyboard_mod</a> = <a class="code" href="eol__input_8c.html#a90d509e2e16c3bcf242e0b37b8422b17">_this_frame_keyboard_mod</a>;
<a name="l00277"></a>00277   <a class="code" href="eol__input_8c.html#a90d509e2e16c3bcf242e0b37b8422b17">_this_frame_keyboard_mod</a> = SDL_GetModState();
<a name="l00278"></a>00278 }
<a name="l00279"></a>00279 
<a name="l00280"></a><a class="code" href="eol__input_8c.html#aa04cf4e4b0144b649a1570bf86ae555c">00280</a> <span class="keywordtype">void</span> <a class="code" href="eol__input_8c.html#aa04cf4e4b0144b649a1570bf86ae555c">eol_input_clear_keyboard</a>()
<a name="l00281"></a>00281 {
<a name="l00282"></a>00282   <span class="keywordflow">if</span>((!<a class="code" href="eol__input_8c.html#a848d720136d359525ed86acf7cc5a4d2">_eol_input_initialized</a>) ||
<a name="l00283"></a>00283      (<a class="code" href="eol__input_8c.html#a436c5e279e62f221c15f2d13257b0baf">_last_frame_keyboard</a> == NULL))<span class="keywordflow">return</span>;
<a name="l00284"></a>00284   memset(<a class="code" href="eol__input_8c.html#a436c5e279e62f221c15f2d13257b0baf">_last_frame_keyboard</a>,0,<span class="keyword">sizeof</span>(Uint8)*<a class="code" href="eol__input_8c.html#a312af162e431bdd997840a060aa76f1d">_eol_input_keyboard_numkeys</a>);
<a name="l00285"></a>00285   <a class="code" href="eol__input_8c.html#a59b65f9fb163d553edca6888047397bd">_last_frame_keyboard_mod</a> = 0;
<a name="l00286"></a>00286   <a class="code" href="eol__input_8c.html#a90d509e2e16c3bcf242e0b37b8422b17">_this_frame_keyboard_mod</a> = 0;
<a name="l00287"></a>00287 }
<a name="l00288"></a>00288 
<a name="l00289"></a><a class="code" href="eol__input_8h.html#a494d60e516cb02e94c1cf160eeaa9d21">00289</a> <a class="code" href="eol__types_8h.html#ae3728b39ff0032c8a9ec060dc81dc115">eolBool</a> <a class="code" href="eol__input_8c.html#a494d60e516cb02e94c1cf160eeaa9d21" title="determines if the keyboard key was pressed this frame">eol_input_is_key_pressed</a>(<a class="code" href="eol__types_8h.html#a7f34f0e945b4ead0fa8f912ea37edcfb">eolInt</a> key)
<a name="l00290"></a>00290 {
<a name="l00291"></a>00291   <span class="keywordflow">if</span>((!<a class="code" href="eol__input_8c.html#a848d720136d359525ed86acf7cc5a4d2">_eol_input_initialized</a>) ||
<a name="l00292"></a>00292     (<a class="code" href="eol__input_8c.html#a436c5e279e62f221c15f2d13257b0baf">_last_frame_keyboard</a> == NULL) ||
<a name="l00293"></a>00293     (<a class="code" href="eol__input_8c.html#a7788462d60ffe628d5ad4991635e8cbb">_this_frame_keyboard</a> == NULL))
<a name="l00294"></a>00294   {
<a name="l00295"></a>00295     <a class="code" href="eol__logger_8c.html#aeb86980a9e11fb8938d3e4dac6e62834" title="log a message at the specified warning levels. It will ignore warning levels below...">eol_logger_message</a>(<a class="code" href="eol__logger_8h.html#a00ea7ac1e164cb45b223d03ef228c968ad7f0aacd56edcfd303cdefb903329486">EOL_LOG_ERROR</a>,<span class="stringliteral">&quot;eol_input: uninitialized.&quot;</span>);
<a name="l00296"></a>00296     <span class="keywordflow">return</span> 0;
<a name="l00297"></a>00297   }
<a name="l00298"></a>00298   <span class="keywordflow">if</span> ((key &lt; 0) || (key &gt;= <a class="code" href="eol__input_8c.html#a312af162e431bdd997840a060aa76f1d">_eol_input_keyboard_numkeys</a>))
<a name="l00299"></a>00299   {
<a name="l00300"></a>00300     <a class="code" href="eol__logger_8c.html#aeb86980a9e11fb8938d3e4dac6e62834" title="log a message at the specified warning levels. It will ignore warning levels below...">eol_logger_message</a>(<a class="code" href="eol__logger_8h.html#a00ea7ac1e164cb45b223d03ef228c968ad7f0aacd56edcfd303cdefb903329486">EOL_LOG_ERROR</a>,<span class="stringliteral">&quot;eol_input: key out of range\n&quot;</span>);
<a name="l00301"></a>00301     <span class="keywordflow">return</span> 0;
<a name="l00302"></a>00302   }
<a name="l00303"></a>00303   <span class="keywordflow">if</span> ((<a class="code" href="eol__input_8c.html#a436c5e279e62f221c15f2d13257b0baf">_last_frame_keyboard</a>[key] == 0) &amp;&amp;
<a name="l00304"></a>00304       (<a class="code" href="eol__input_8c.html#a7788462d60ffe628d5ad4991635e8cbb">_this_frame_keyboard</a>[key] == 1))
<a name="l00305"></a>00305     <span class="keywordflow">return</span> <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a1ccbeff6bcfdd81dad879593a1c859a7">eolTrue</a>;
<a name="l00306"></a>00306   <span class="keywordflow">return</span> <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a3022b161029854a17d9534a80cff370f">eolFalse</a>;
<a name="l00307"></a>00307 }
<a name="l00308"></a>00308 
<a name="l00309"></a><a class="code" href="eol__input_8h.html#a01598d3147ff3d84930dab1206a5f045">00309</a> <a class="code" href="eol__types_8h.html#ae3728b39ff0032c8a9ec060dc81dc115">eolBool</a> <a class="code" href="eol__input_8c.html#a01598d3147ff3d84930dab1206a5f045" title="determines if the keyboard key was released this frame">eol_input_is_key_released</a>(<a class="code" href="eol__types_8h.html#a7f34f0e945b4ead0fa8f912ea37edcfb">eolInt</a> key)
<a name="l00310"></a>00310 {
<a name="l00311"></a>00311   <span class="keywordflow">if</span>((<a class="code" href="eol__input_8c.html#a848d720136d359525ed86acf7cc5a4d2">_eol_input_initialized</a> == <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a3022b161029854a17d9534a80cff370f">eolFalse</a>) ||
<a name="l00312"></a>00312     (<a class="code" href="eol__input_8c.html#a436c5e279e62f221c15f2d13257b0baf">_last_frame_keyboard</a> == NULL) ||
<a name="l00313"></a>00313     (<a class="code" href="eol__input_8c.html#a7788462d60ffe628d5ad4991635e8cbb">_this_frame_keyboard</a> == NULL))
<a name="l00314"></a>00314   {
<a name="l00315"></a>00315     <a class="code" href="eol__logger_8c.html#aeb86980a9e11fb8938d3e4dac6e62834" title="log a message at the specified warning levels. It will ignore warning levels below...">eol_logger_message</a>(<a class="code" href="eol__logger_8h.html#a00ea7ac1e164cb45b223d03ef228c968ad7f0aacd56edcfd303cdefb903329486">EOL_LOG_ERROR</a>,<span class="stringliteral">&quot;eol_input: uninitialized.\n&quot;</span>);
<a name="l00316"></a>00316     <span class="keywordflow">return</span> 0;
<a name="l00317"></a>00317   }
<a name="l00318"></a>00318   <span class="keywordflow">if</span> ((key &lt; 0) || (key &gt;= <a class="code" href="eol__input_8c.html#a312af162e431bdd997840a060aa76f1d">_eol_input_keyboard_numkeys</a>))
<a name="l00319"></a>00319   {
<a name="l00320"></a>00320     <a class="code" href="eol__logger_8c.html#aeb86980a9e11fb8938d3e4dac6e62834" title="log a message at the specified warning levels. It will ignore warning levels below...">eol_logger_message</a>(<a class="code" href="eol__logger_8h.html#a00ea7ac1e164cb45b223d03ef228c968ad7f0aacd56edcfd303cdefb903329486">EOL_LOG_ERROR</a>,<span class="stringliteral">&quot;eol_input: key out of range\n&quot;</span>);
<a name="l00321"></a>00321     <span class="keywordflow">return</span> 0;
<a name="l00322"></a>00322   }
<a name="l00323"></a>00323   <span class="keywordflow">if</span> ((<a class="code" href="eol__input_8c.html#a436c5e279e62f221c15f2d13257b0baf">_last_frame_keyboard</a>[key] == 1) &amp;&amp;
<a name="l00324"></a>00324     (<a class="code" href="eol__input_8c.html#a7788462d60ffe628d5ad4991635e8cbb">_this_frame_keyboard</a>[key] == 0))
<a name="l00325"></a>00325     <span class="keywordflow">return</span> <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a1ccbeff6bcfdd81dad879593a1c859a7">eolTrue</a>;
<a name="l00326"></a>00326   <span class="keywordflow">return</span> <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a3022b161029854a17d9534a80cff370f">eolFalse</a>;
<a name="l00327"></a>00327 }
<a name="l00328"></a>00328 
<a name="l00329"></a><a class="code" href="eol__input_8h.html#a64e80e64409db5bebf47289a648720dd">00329</a> <a class="code" href="eol__types_8h.html#ae3728b39ff0032c8a9ec060dc81dc115">eolBool</a> <a class="code" href="eol__input_8c.html#a64e80e64409db5bebf47289a648720dd" title="determines if the keyboard key is held during this frame">eol_input_is_key_held</a>(<a class="code" href="eol__types_8h.html#a7f34f0e945b4ead0fa8f912ea37edcfb">eolInt</a> key)
<a name="l00330"></a>00330 {
<a name="l00331"></a>00331   <span class="keywordflow">if</span>((<a class="code" href="eol__input_8c.html#a848d720136d359525ed86acf7cc5a4d2">_eol_input_initialized</a> == <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a3022b161029854a17d9534a80cff370f">eolFalse</a>) ||
<a name="l00332"></a>00332     (<a class="code" href="eol__input_8c.html#a436c5e279e62f221c15f2d13257b0baf">_last_frame_keyboard</a> == NULL) ||
<a name="l00333"></a>00333     (<a class="code" href="eol__input_8c.html#a7788462d60ffe628d5ad4991635e8cbb">_this_frame_keyboard</a> == NULL))
<a name="l00334"></a>00334   {
<a name="l00335"></a>00335     <a class="code" href="eol__logger_8c.html#aeb86980a9e11fb8938d3e4dac6e62834" title="log a message at the specified warning levels. It will ignore warning levels below...">eol_logger_message</a>(<a class="code" href="eol__logger_8h.html#a00ea7ac1e164cb45b223d03ef228c968ad7f0aacd56edcfd303cdefb903329486">EOL_LOG_ERROR</a>,<span class="stringliteral">&quot;eol_input: uninitialized.&quot;</span>);
<a name="l00336"></a>00336     <span class="keywordflow">return</span> 0;
<a name="l00337"></a>00337   }
<a name="l00338"></a>00338   <span class="keywordflow">if</span> ((key &lt; 0) || (key &gt;= <a class="code" href="eol__input_8c.html#a312af162e431bdd997840a060aa76f1d">_eol_input_keyboard_numkeys</a>))
<a name="l00339"></a>00339   {
<a name="l00340"></a>00340     <a class="code" href="eol__logger_8c.html#aeb86980a9e11fb8938d3e4dac6e62834" title="log a message at the specified warning levels. It will ignore warning levels below...">eol_logger_message</a>(<a class="code" href="eol__logger_8h.html#a00ea7ac1e164cb45b223d03ef228c968ad7f0aacd56edcfd303cdefb903329486">EOL_LOG_ERROR</a>,<span class="stringliteral">&quot;eol_input: key out of range\n&quot;</span>);
<a name="l00341"></a>00341     <span class="keywordflow">return</span> 0;
<a name="l00342"></a>00342   }
<a name="l00343"></a>00343   <span class="keywordflow">if</span> ((<a class="code" href="eol__input_8c.html#a436c5e279e62f221c15f2d13257b0baf">_last_frame_keyboard</a>[key] == 1) &amp;&amp;
<a name="l00344"></a>00344     (<a class="code" href="eol__input_8c.html#a7788462d60ffe628d5ad4991635e8cbb">_this_frame_keyboard</a>[key] == 1))
<a name="l00345"></a>00345   {
<a name="l00346"></a>00346     <span class="keywordflow">return</span> <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a1ccbeff6bcfdd81dad879593a1c859a7">eolTrue</a>;
<a name="l00347"></a>00347   }
<a name="l00348"></a>00348   <span class="keywordflow">return</span> <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a3022b161029854a17d9534a80cff370f">eolFalse</a>;
<a name="l00349"></a>00349 }
<a name="l00350"></a>00350 
<a name="l00351"></a><a class="code" href="eol__input_8h.html#a7bac5f6fc8de890bd1ee9b2cc900bbd3">00351</a> <a class="code" href="eol__types_8h.html#ae3728b39ff0032c8a9ec060dc81dc115">eolBool</a> <a class="code" href="eol__input_8c.html#a7bac5f6fc8de890bd1ee9b2cc900bbd3" title="determines if the keyboard modifier key is held during this frame Uses SDLMod enumerations...">eol_input_is_mod_held</a>(<a class="code" href="eol__types_8h.html#ad9718fff0d6b6166a58b74814a5ef687">eolUint</a> mod)
<a name="l00352"></a>00352 {
<a name="l00353"></a>00353   <span class="keywordflow">if</span>((<a class="code" href="eol__input_8c.html#a848d720136d359525ed86acf7cc5a4d2">_eol_input_initialized</a> == <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a3022b161029854a17d9534a80cff370f">eolFalse</a>) ||
<a name="l00354"></a>00354     (<a class="code" href="eol__input_8c.html#a436c5e279e62f221c15f2d13257b0baf">_last_frame_keyboard</a> == NULL) ||
<a name="l00355"></a>00355     (<a class="code" href="eol__input_8c.html#a7788462d60ffe628d5ad4991635e8cbb">_this_frame_keyboard</a> == NULL))
<a name="l00356"></a>00356   {
<a name="l00357"></a>00357     <a class="code" href="eol__logger_8c.html#aeb86980a9e11fb8938d3e4dac6e62834" title="log a message at the specified warning levels. It will ignore warning levels below...">eol_logger_message</a>(<a class="code" href="eol__logger_8h.html#a00ea7ac1e164cb45b223d03ef228c968ad7f0aacd56edcfd303cdefb903329486">EOL_LOG_ERROR</a>,<span class="stringliteral">&quot;eol_input: uninitialized.&quot;</span>);
<a name="l00358"></a>00358     <span class="keywordflow">return</span> 0;
<a name="l00359"></a>00359   }
<a name="l00360"></a>00360   <span class="keywordflow">if</span> ((<a class="code" href="eol__input_8c.html#a90d509e2e16c3bcf242e0b37b8422b17">_this_frame_keyboard_mod</a> &amp; mod) &amp;&amp;
<a name="l00361"></a>00361     (<a class="code" href="eol__input_8c.html#a59b65f9fb163d553edca6888047397bd">_last_frame_keyboard_mod</a> &amp; mod))
<a name="l00362"></a>00362   {
<a name="l00363"></a>00363     <span class="keywordflow">return</span> <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a1ccbeff6bcfdd81dad879593a1c859a7">eolTrue</a>;
<a name="l00364"></a>00364   }
<a name="l00365"></a>00365   <span class="keywordflow">return</span> <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a3022b161029854a17d9534a80cff370f">eolFalse</a>;
<a name="l00366"></a>00366 }
<a name="l00367"></a>00367 
<a name="l00368"></a><a class="code" href="eol__input_8h.html#a9776c0c5d7986e34d481f072aaa53bf9">00368</a> <a class="code" href="eol__types_8h.html#ae3728b39ff0032c8a9ec060dc81dc115">eolBool</a> <a class="code" href="eol__input_8c.html#a9776c0c5d7986e34d481f072aaa53bf9" title="determines if the keyboard modifier key is pressed during this frame Uses SDLMod...">eol_input_is_mod_pressed</a>(<a class="code" href="eol__types_8h.html#ad9718fff0d6b6166a58b74814a5ef687">eolUint</a> mod)
<a name="l00369"></a>00369 {
<a name="l00370"></a>00370   <span class="keywordflow">if</span>((<a class="code" href="eol__input_8c.html#a848d720136d359525ed86acf7cc5a4d2">_eol_input_initialized</a> == <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a3022b161029854a17d9534a80cff370f">eolFalse</a>) ||
<a name="l00371"></a>00371     (<a class="code" href="eol__input_8c.html#a436c5e279e62f221c15f2d13257b0baf">_last_frame_keyboard</a> == NULL) ||
<a name="l00372"></a>00372     (<a class="code" href="eol__input_8c.html#a7788462d60ffe628d5ad4991635e8cbb">_this_frame_keyboard</a> == NULL))
<a name="l00373"></a>00373   {
<a name="l00374"></a>00374     <a class="code" href="eol__logger_8c.html#aeb86980a9e11fb8938d3e4dac6e62834" title="log a message at the specified warning levels. It will ignore warning levels below...">eol_logger_message</a>(<a class="code" href="eol__logger_8h.html#a00ea7ac1e164cb45b223d03ef228c968ad7f0aacd56edcfd303cdefb903329486">EOL_LOG_ERROR</a>,<span class="stringliteral">&quot;eol_input: uninitialized.&quot;</span>);
<a name="l00375"></a>00375     <span class="keywordflow">return</span> 0;
<a name="l00376"></a>00376   }
<a name="l00377"></a>00377   <span class="keywordflow">if</span> ((<a class="code" href="eol__input_8c.html#a90d509e2e16c3bcf242e0b37b8422b17">_this_frame_keyboard_mod</a> &amp; mod) &amp;&amp;
<a name="l00378"></a>00378     (!(<a class="code" href="eol__input_8c.html#a59b65f9fb163d553edca6888047397bd">_last_frame_keyboard_mod</a> &amp; mod)))
<a name="l00379"></a>00379   {
<a name="l00380"></a>00380     <span class="keywordflow">return</span> <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a1ccbeff6bcfdd81dad879593a1c859a7">eolTrue</a>;
<a name="l00381"></a>00381   }
<a name="l00382"></a>00382   <span class="keywordflow">return</span> <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a3022b161029854a17d9534a80cff370f">eolFalse</a>;
<a name="l00383"></a>00383 }
<a name="l00384"></a>00384 
<a name="l00385"></a><a class="code" href="eol__input_8h.html#a8bcd09d0bc99aafae6080abaf1f4a82d">00385</a> <a class="code" href="eol__types_8h.html#ae3728b39ff0032c8a9ec060dc81dc115">eolBool</a> <a class="code" href="eol__input_8c.html#a8bcd09d0bc99aafae6080abaf1f4a82d" title="determines if the keyboard modifier key is released during this frame Uses SDLMod...">eol_input_is_mod_released</a>(<a class="code" href="eol__types_8h.html#ad9718fff0d6b6166a58b74814a5ef687">eolUint</a> mod)
<a name="l00386"></a>00386 {
<a name="l00387"></a>00387   <span class="keywordflow">if</span>((<a class="code" href="eol__input_8c.html#a848d720136d359525ed86acf7cc5a4d2">_eol_input_initialized</a> == <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a3022b161029854a17d9534a80cff370f">eolFalse</a>) ||
<a name="l00388"></a>00388     (<a class="code" href="eol__input_8c.html#a436c5e279e62f221c15f2d13257b0baf">_last_frame_keyboard</a> == NULL) ||
<a name="l00389"></a>00389     (<a class="code" href="eol__input_8c.html#a7788462d60ffe628d5ad4991635e8cbb">_this_frame_keyboard</a> == NULL))
<a name="l00390"></a>00390   {
<a name="l00391"></a>00391     <a class="code" href="eol__logger_8c.html#aeb86980a9e11fb8938d3e4dac6e62834" title="log a message at the specified warning levels. It will ignore warning levels below...">eol_logger_message</a>(<a class="code" href="eol__logger_8h.html#a00ea7ac1e164cb45b223d03ef228c968ad7f0aacd56edcfd303cdefb903329486">EOL_LOG_ERROR</a>,<span class="stringliteral">&quot;eol_input: uninitialized.&quot;</span>);
<a name="l00392"></a>00392     <span class="keywordflow">return</span> 0;
<a name="l00393"></a>00393   }
<a name="l00394"></a>00394   <span class="keywordflow">if</span> ((<a class="code" href="eol__input_8c.html#a59b65f9fb163d553edca6888047397bd">_last_frame_keyboard_mod</a> &amp; mod) &amp;&amp;
<a name="l00395"></a>00395     (!(<a class="code" href="eol__input_8c.html#a90d509e2e16c3bcf242e0b37b8422b17">_this_frame_keyboard_mod</a> &amp; mod)))
<a name="l00396"></a>00396   {
<a name="l00397"></a>00397     <span class="keywordflow">return</span> <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a1ccbeff6bcfdd81dad879593a1c859a7">eolTrue</a>;
<a name="l00398"></a>00398   }
<a name="l00399"></a>00399   <span class="keywordflow">return</span> <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a3022b161029854a17d9534a80cff370f">eolFalse</a>;
<a name="l00400"></a>00400 }
<a name="l00401"></a>00401 
<a name="l00402"></a><a class="code" href="eol__input_8h.html#a11f0d498f697b0e92ce6efcf7b7db9eb">00402</a> <a class="code" href="eol__types_8h.html#ae3728b39ff0032c8a9ec060dc81dc115">eolBool</a> <a class="code" href="eol__input_8c.html#a11f0d498f697b0e92ce6efcf7b7db9eb" title="checks for any quit condition from the user.">eol_input_quit_check</a>()
<a name="l00403"></a>00403 {
<a name="l00404"></a>00404   SDL_Event event;
<a name="l00405"></a>00405   <span class="keywordflow">while</span>(SDL_PeepEvents(&amp;event, 1, SDL_PEEKEVENT, SDL_QUITMASK))
<a name="l00406"></a>00406   {
<a name="l00407"></a>00407     <span class="keywordflow">if</span>(event.type == SDL_QUIT)
<a name="l00408"></a>00408     {
<a name="l00409"></a>00409       <span class="keywordflow">return</span> <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a1ccbeff6bcfdd81dad879593a1c859a7">eolTrue</a>;
<a name="l00410"></a>00410     }
<a name="l00411"></a>00411   }
<a name="l00412"></a>00412   <span class="keywordflow">return</span> <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a3022b161029854a17d9534a80cff370f">eolFalse</a>;
<a name="l00413"></a>00413 }
<a name="l00414"></a>00414 
<a name="l00415"></a><a class="code" href="eol__input_8c.html#a27ee875f684e18ee949e8fc435b4c1b5">00415</a> <a class="code" href="structeolInput.html" title="structure for defining a control type.">eolInput</a> *<a class="code" href="eol__input_8c.html#a27ee875f684e18ee949e8fc435b4c1b5">eol_input_get_by_name</a>(<span class="keywordtype">char</span> *input)
<a name="l00416"></a>00416 {
<a name="l00417"></a>00417   <span class="keywordtype">int</span> i;
<a name="l00418"></a>00418   <span class="keywordflow">for</span> (i = 0;i &lt; <a class="code" href="eol__input_8c.html#a2a6c0b737135d502e8d23cf17839edb4">_num_inputs</a>;i++)
<a name="l00419"></a>00419   {
<a name="l00420"></a>00420     <span class="keywordflow">if</span> (strncmp(input,_input_list[i].<a class="code" href="eol__opengl_8h.html#a5c4947d4516dd7cfa3505ce3a648a4ef">name</a>,<a class="code" href="eol__types_8h.html#a4111fa5f05bb9f3d53c75a2af7aef887">EOLLINELEN</a>) == 0)
<a name="l00421"></a>00421     {
<a name="l00422"></a>00422       <span class="keywordflow">return</span> &amp;_input_list[i];
<a name="l00423"></a>00423     }
<a name="l00424"></a>00424   }
<a name="l00425"></a>00425   <span class="keywordflow">return</span> NULL;
<a name="l00426"></a>00426 }
<a name="l00427"></a>00427 
<a name="l00428"></a><a class="code" href="eol__input_8h.html#a2b7fc21f068f37f7e28cdf1ae9b3e9e1">00428</a> <a class="code" href="eol__types_8h.html#ae3728b39ff0032c8a9ec060dc81dc115">eolBool</a> <a class="code" href="eol__input_8c.html#a489d50dccf9d19e054340f88af5225c1" title="determines the if the named input is in a down state at the point of this call.">eol_input_is_input_down</a>(<span class="keywordtype">char</span> *inputName)
<a name="l00429"></a>00429 {
<a name="l00430"></a>00430   <a class="code" href="structeolInput.html" title="structure for defining a control type.">eolInput</a> *input = NULL;
<a name="l00431"></a>00431   input = <a class="code" href="eol__input_8c.html#a27ee875f684e18ee949e8fc435b4c1b5">eol_input_get_by_name</a>(inputName);
<a name="l00432"></a>00432   <span class="keywordflow">if</span> (input == NULL)<span class="keywordflow">return</span> <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a3022b161029854a17d9534a80cff370f">eolFalse</a>;
<a name="l00433"></a>00433   <span class="keywordflow">if</span> (input-&gt;<a class="code" href="structeolInput.html#ab33f299bd08d8f7b8f06e3495a0f54b9">value</a> != 0)<span class="keywordflow">return</span> <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a1ccbeff6bcfdd81dad879593a1c859a7">eolTrue</a>;
<a name="l00434"></a>00434   <span class="keywordflow">return</span> <a class="code" href="eol__types_8h.html#ace26262f5479832c35e71ff94a5ca4f9a3022b161029854a17d9534a80cff370f">eolFalse</a>;
<a name="l00435"></a>00435 }
<a name="l00436"></a>00436 <span class="comment">/*eol@eof*/</span>
<a name="l00437"></a>00437 
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Wed Aug 15 18:01:23 2012 for EngineOfLies by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
